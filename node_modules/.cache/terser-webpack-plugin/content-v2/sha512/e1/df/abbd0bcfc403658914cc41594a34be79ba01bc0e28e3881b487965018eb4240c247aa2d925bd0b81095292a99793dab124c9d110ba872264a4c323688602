{"code":"!function(e){var t={};function i(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=0)}([function(e,t,i){\"use strict\";i.r(t);function s(e){return new Promise(t=>{setTimeout(t,e)})}var a=class{constructor(e,t,i){this.opts=i,this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.arrFrequency=[131,147,165,175,196,220,247,262,294,330,349,392,440,494,523,587,659,698,784,880,988,1047,1175,1319,1397,1568,1760,1967,2089,2288,2565,2716,3047,3417,3832,4100,4400,4700,5e3,5300,5600,5900],this.arrMarks=[\"!1\",\"!2\",\"!3\",\"!4\",\"!5\",\"!6\",\"!7\",\"@1\",\"@2\",\"@3\",\"@4\",\"@5\",\"@6\",\"@7\",\"#1\",\"#2\",\"#3\",\"#4\",\"#5\",\"#6\",\"#7\",\"1$\",\"2$\",\"3$\",\"4$\",\"5$\",\"6$\",\"7$\",\"1%\",\"2%\",\"3%\",\"4%\",\"5%\",\"6%\",\"7%\",\"1^\",\"2^\",\"3^\",\"4^\",\"5^\",\"6^\",\"7^\"],this.arrNotes=[\"r\",\"t\",\"y\",\"u\",\"i\",\"o\",\"p\",\"c\",\"d\",\"e\",\"f\",\"g\",\"a\",\"b\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"C\",\"D\",\"E\",\"F\",\"G\",\"A\",\"B\",\"一\",\"二\",\"三\",\"四\",\"五\",\"六\",\"七\",\"壹\",\"贰\",\"叁\",\"肆\",\"伍\",\"陆\",\"柒\"],this.keyNum=28,this.draw(),this.speed=170,this.paused=!1,this.exist=!1}createSound(e){let t=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();t.connect(i),i.connect(this.audioCtx.destination),t.type=this.opts.type,t.frequency.value=e,i.gain.setValueAtTime(0,this.audioCtx.currentTime),i.gain.linearRampToValueAtTime(this.opts.volume,this.audioCtx.currentTime+.01),t.start(this.audioCtx.currentTime),i.gain.exponentialRampToValueAtTime(.001,this.audioCtx.currentTime+this.opts.duration),t.stop(this.audioCtx.currentTime+this.opts.duration)}draw(){let e=[\"!1\",\"!2\",\"!3\",\"!4\",\"!5\",\"!6\",\"!7\",\"@1\",\"@2\",\"@3\",\"@4\",\"@5\",\"@6\",\"@7\",\"#1\",\"#2\",\"#3\",\"#4\",\"#5\",\"#6\",\"#7\",\"1$\",\"2$\",\"3$\",\"4$\",\"5$\",\"6$\",\"7$\",\"1%\",\"2%\",\"3%\",\"4%\",\"5%\",\"6%\",\"7%\",\"1^\",\"2^\",\"3^\",\"4^\",\"5^\",\"6^\",\"7^\"],t=document.querySelector(\".leftHand\"),i=\"\",s=document.querySelector(\".rightHand\"),a=\"\";for(let t=0;t<Math.ceil(this.keyNum/2);t++)i+='<li><span></span><i class=\"iCss\">'+e[t]+\"</i></li>\";t.innerHTML=\"<ul>\"+i+\"</ul>\";for(let t=Math.ceil(this.keyNum/2);t<this.keyNum;t++)a+='<li><span></span><i class=\"iCss\">'+e[t]+\"</i></li>\";s.innerHTML=\"<ul>\"+a+\"</ul>\";let o=this;$(\".box\").on(\"click\",\"li\",(function(){$(this);let e=$(this).children(\"i\").text();o.pressBtn(e)}))}createMusic(e){let t=this.arrMarks.indexOf(e);-1!==t&&this.createSound(this.arrFrequency[t])}pressBtn(e){this.opts.volume||(this.opts.volume=1),this.createMusic(e)}playMusic(e,t){if(this.exist)console.log(\"current music is playing\");else{this.exist=!0,this.pauseMusic(!1);let i=e.split(\"\"),a=t?t.split(\"\"):\"\",o=6e4;console.log(i),console.log(a),(async()=>{try{let e=0;for(;!this.paused;){if(this.opts.volume=3,e>=i.length){if(!this.opts.loop){this.exist=!1;break}e=0}let t=this.arrNotes.indexOf(i[e]);if(-1!==t){t-=7;let e=this.arrMarks[t];this.pressBtn(e);let i=Math.round(255*Math.random()),s=Math.round(255*Math.random()),a=Math.round(255*Math.random());t<this.keyNum/2?($(\".leftHand li\").eq(t).css(\"background-color\",\"rgba(\"+i+\",\"+s+\",\"+a+\",.2)\"),setTimeout((function(){$(\".leftHand li\").eq(t).css(\"background-color\",\"white\")}),200)):(t-=this.keyNum/2,$(\".rightHand li\").eq(t).css(\"background-color\",\"rgba(\"+i+\",\"+s+\",\"+a+\",.2)\"),setTimeout((function(){$(\".rightHand li\").eq(t).css(\"background-color\",\"white\")}),200))}else switch(i[e]){case\"0\":console.log(\"0\");break;case\"-\":await s(o/(2*this.speed));break;case\"=\":await s(o/(4*this.speed));break;case\"!\":await s(o/(8*this.speed));break;case\"^\":await s(o/this.speed);break;case\"?\":await s(o/(3*this.speed));break;case\"*\":await s(o/(6*this.speed))}e++}}catch(e){console.log(\"わからないw\")}})(),(async()=>{try{let e=0;for(;!this.paused;){if(this.opts.volume=3,this.opts.duration=3,e>=a.length){if(!this.opts.loop){this.exist=!0;break}e=0}let t=this.arrNotes.indexOf(a[e]);if(-1!==t){t-=7;let e=this.arrMarks[t];this.pressBtn(e);let i=Math.round(255*Math.random()),s=Math.round(255*Math.random()),a=Math.round(255*Math.random());t<this.keyNum/2?($(\".leftHand li\").eq(t).css(\"background-color\",\"rgba(\"+i+\",\"+s+\",\"+a+\",.2)\"),setTimeout((function(){$(\".leftHand li\").eq(t).css(\"background-color\",\"white\")}),200)):(t-=this.keyNum/2,$(\".rightHand li\").eq(t).css(\"background-color\",\"rgba(\"+i+\",\"+s+\",\"+a+\",.2)\"),setTimeout((function(){$(\".rightHand li\").eq(t).css(\"background-color\",\"white\")}),200))}else switch(a[e]){case\"0\":console.log(\"0\");break;case\"-\":await s(o/(2*this.speed));break;case\"=\":await s(o/(4*this.speed));break;case\"!\":await s(o/(8*this.speed));break;case\"^\":await s(o/this.speed);break;case\"?\":await s(o/(3*this.speed));break;case\"*\":await s(o/(6*this.speed))}e++}}catch(e){console.log(\"わからないw\")}})()}}pauseMusic(e){this.paused=e,e&&(this.exist=!1)}setPlaySpeed(e){this.speed=e}};window.onload=()=>{let e=$(\"input[type=radio]:checked\").val(),t=new a(\".leftHand\",\".rightHand\",{type:e,duration:2,loop:!0});$(\"#song\").on(\"click\",\"button\",(function(){var e;e=$(this).val(),$.getJSON(\"./musicContext.json\",i=>{let s=$(\".\"+e).val();t.pauseMusic(!0),setTimeout(()=>{t.playMusic(i[s].melody,i[s].melodyL),$(\"#speedControl\").val(i[s].speed),$(\"#speedValue\").text(i[s].speed),t.setPlaySpeed(i[s].speed)},500)})})),$(\"input[type=radio]\").click((function(){e=$(\"input[type=radio]:checked\").val(),t.opts.type=e})),$(\".stopBtn\").click(()=>{t.pauseMusic(!0)});$(\"#speedControl\").on(\"input\",()=>{let e=$(\"#speedControl\").val();$(\"#speedValue\").text(e),t.setPlaySpeed(e),console.log(\"現在スピード\"+e+\"BPM\")})}}]);","extractedComments":[]}